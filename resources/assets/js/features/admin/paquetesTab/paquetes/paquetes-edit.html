<div class="row">
    <div class="col-md-12">
        <div class="double-bounce1" ng-show="loader.loading"><span us-spinner></span></div>

        <div class="row">
            <div class="col-md-10">
                <h2>{{ title }}</h2>

            </div>

            <div class="col-sm-2">
                <a class="btn btn-warning" href="#/paquetes/"><span class="glyphicon glyphicon-arrow-left"> Cancelar</span></a>
            </div>

        </div>
        <hr />
        <form name="formShipment" ng-submit="submitShipment()">

            <div class="row">

            </div>

            <div class="row">

                <div class="col-md-6">
                    <div class="panel panel-info">
                        <div class="panel-heading">Remitente </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-xs-10">
                                    <ui-select ng-model="sender.selected" ng-change="sourceSenderChanged()"  theme="bootstrap" ng-if="!showSenderName" ng-required="!showSenderName"  ng-disabled="!isEdit">
                                        <ui-select-match class="ui-select-match" placeholder="Listado de Remitentes">{{$select.selected.name}}</ui-select-match>
                                        <ui-select-choices class="ui-select-choices"  data-id="$index"  refresh="searchSenders($select)" refresh-delay="300" repeat="senders in senders">
                                            <div ng-bind-html="senders.name | highlight: $select.search"></div>
                                            <small style="font-size: 0.8rem">
                                                <span ng-bind-html="''+senders.establecimiento.name | highlight: $select.search"></span>
                                            </small>
                                        </ui-select-choices>
                                    </ui-select>

                                    <input type="text" class="form-controll" ng-model="senderName" ng-if="showSenderName" disabled>
                                </div>
                                <div class="col-xs-1">

                                    <a class="btn btn-warning" ng-click="senderModal(1)" ng-if="isEdit"><i class="glyphicon glyphicon-plus"></i></a>

                                </div>
                            </div>
                            <div class="row" ng-show="remitente">
                                <div class="col-xs-12">
                                    <hr />
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <div style="border-bottom: 1px solid black"><strong>Establecimiento</strong></div>
                                            {{ remitente.establecimiento.name }}
                                        </div>
                                        <div class="col-xs-6">
                                            <div style="border-bottom: 1px solid black">
                                                <strong>Sección</strong>
                                            </div>
                                            {{ remitente.seccion.name }}
                                        </div>
                                        <div class="col-xs-12">
                                            <div style="border-bottom: 1px solid black">Dirección</div>
                                            {{ remitente.establecimiento.address }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">Destinatario</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-xs-10">
                                    <ui-select ng-model="reciber.selected" ng-change="sourceReciberChanged()"  theme="bootstrap" ng-required="!showReciberName" ng-if="!showReciberName"  ng-disabled="!isEdit">
                                        <ui-select-match class="ui-select-match" placeholder="Listado de Destinatarios">{{$select.selected.name}}</ui-select-match>
                                        <ui-select-choices class="ui-select-choices"  data-id="$index"  refresh="searchReciber($select)" refresh-delay="300" repeat="recibers in recibers">
                                            <div ng-bind-html="recibers.name | highlight: $select.search"></div>
                                            <small style="font-size: 0.8rem">
                                                <span ng-bind-html="''+recibers.establecimiento.name | highlight: $select.search"></span>
                                            </small>
                                        </ui-select-choices>
                                    </ui-select>

                                    <input type="text" class="form-controll" ng-model="reciberName" ng-if="showReciberName" disabled>

                                </div>
                                <div class="col-xs-1">
                                    <a class="btn btn-warning" ng-click="senderModal(2)"  ng-if="isEdit"><i class="glyphicon glyphicon-plus"></i></a>
                                </div>
                            </div>
                            <div class="row" ng-show="destinatario">
                                <div class="col-xs-12">
                                    <hr />
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <div style="border-bottom: 1px solid black"><strong>Establecimiento</strong></div>
                                            {{ destinatario.establecimiento.name }}
                                        </div>
                                        <div class="col-xs-6">
                                            <div style="border-bottom: 1px solid black">
                                                <strong>Sección</strong>
                                            </div>
                                            {{ destinatario.seccion.name }}
                                        </div>
                                        <div class="col-xs-12">
                                            <div style="border-bottom: 1px solid black">Dirección</div>
                                            {{ destinatario.establecimiento.address }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Descripción</label>
                        <textarea name="" class="form-control" rows="3" ng-model="shipment.description" ng-disabled="!isEdit"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12" style="text-align: right !important;">
                    <button class="btn btn-warning" type="button" ng-click="cancel()" ng-if="!isEdit">Cancel</button>
                    <button class="btn btn-success" ng-click="edit()" ng-if="!isEdit">Editar</button>
                    <button class="btn btn-warning" type="button" ng-click="unEdit()" ng-if="isEdit">Cancel Edición</button>
                    <button class="btn btn-success" ng-click="ok()" ng-disabled="formShipment.$invalid" ng-if="isEdit">Actualizar</button>
                </div>
            </div>
        </form>
        <div class="row" ng-if="!isEdit">
            <div class="col-md-12">
                <div class="table-responsive">
                <div class="double-bounce1" ng-show="loader.loading3"><span us-spinner></span></div>

                    <hr />
                    <table class="table table-bordered">
                        <thead>
                        <th>No.</th>
                        <th>Estado</th>
                        <th>Usuario</th>
                        <th>Ubicación de evento</th>
                        <th>Fecha y Hora</th>
                        </thead>
                        <tbody>
                        <tr ng-repeat="transito in shipment.transitos">
                            <td><a ng-click="editModal(transito.id)">{{ transito.id }}</a></td>
                            <td>{{ transito.estados.name }}</td>
                            <td>{{ transito.user.name  }}</td>
                            <td>{{ transito.establecimiento.name }}</td>
                            <td>{{ transito.created_at }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <button ng-click="createModal()" class="btn"><i class="glyphicon glyphicon-plus"></i> Transito</button>
        </div>
    </div>
</div>